{% extends 'onboarding/base.html' %}

{% block title %}Grade Analysis Dashboard - SciWeb{% endblock %}

{% block header_title %}Your Academic Dashboard{% endblock %}
{% block header_subtitle %}Customize your dashboard by selecting, rearranging, and resizing the charts you want to display{% endblock %}

{% block onboarding_content %}
<div class="onboarding-step">
    <div class="jupiter-dashboard">
        <div class="dashboard-header">
            <h3><i class="fas fa-chart-line"></i> Grade Analysis Dashboard</h3>
            <div class="dashboard-controls">
                <button id="add-chart-btn" class="btn-secondary"><i class="fas fa-plus"></i> Add Chart</button>
                <button id="save-layout-btn" class="btn-primary"><i class="fas fa-save"></i> Save Layout</button>
            </div>
        </div>
        
        <div class="imported-message">
            <i class="fas fa-info-circle"></i>
            <div class="message-content">
                <h3>Grade Data Imported from Jupiter</h3>
                <p>We've analyzed your grade data. Customize your dashboard by dragging, resizing, or adding new charts.</p>
            </div>
        </div>
        
        <div class="charts-container" id="sortable-charts">
            <!-- GPA Trend Chart -->
            <div class="chart-widget" data-chart-id="gpa-trend">
                <div class="chart-header">
                    <h4>GPA Trend</h4>
                    <div class="widget-controls">
                        <button class="btn-icon widget-toggle"><i class="fas fa-eye"></i></button>
                        <button class="btn-icon widget-resize"><i class="fas fa-expand-alt"></i></button>
                        <button class="btn-icon widget-remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="gpa-trend-chart"></canvas>
                </div>
            </div>
            
            <!-- Subject Performance Chart -->
            <div class="chart-widget" data-chart-id="subject-performance">
                <div class="chart-header">
                    <h4>Subject Performance</h4>
                    <div class="widget-controls">
                        <button class="btn-icon widget-toggle"><i class="fas fa-eye"></i></button>
                        <button class="btn-icon widget-resize"><i class="fas fa-expand-alt"></i></button>
                        <button class="btn-icon widget-remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="subject-performance-chart"></canvas>
                </div>
            </div>
            
            <!-- Grade Distribution Chart -->
            <div class="chart-widget" data-chart-id="grade-distribution">
                <div class="chart-header">
                    <h4>Grade Distribution</h4>
                    <div class="widget-controls">
                        <button class="btn-icon widget-toggle"><i class="fas fa-eye"></i></button>
                        <button class="btn-icon widget-resize"><i class="fas fa-expand-alt"></i></button>
                        <button class="btn-icon widget-remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="grade-distribution-chart"></canvas>
                </div>
            </div>
            
            <!-- Assignment Performance Chart -->
            <div class="chart-widget" data-chart-id="assignment-performance">
                <div class="chart-header">
                    <h4>Assignment Performance</h4>
                    <div class="widget-controls">
                        <button class="btn-icon widget-toggle"><i class="fas fa-eye"></i></button>
                        <button class="btn-icon widget-resize"><i class="fas fa-expand-alt"></i></button>
                        <button class="btn-icon widget-remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="assignment-performance-chart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Add Chart Modal -->
        <div class="modal" id="add-chart-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Chart to Dashboard</h3>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="chart-options">
                        <!-- Test Score Analysis -->
                        <div class="chart-option" data-chart-id="test-score-analysis">
                            <div class="chart-option-preview">
                                <i class="fas fa-chart-bar fa-3x"></i>
                            </div>
                            <div class="chart-option-details">
                                <h4>Test Score Analysis</h4>
                                <p>Deep dive into your test performance with detailed score breakdowns</p>
                            </div>
                        </div>
                        
                        <!-- Grade Prediction -->
                        <div class="chart-option" data-chart-id="grade-prediction">
                            <div class="chart-option-preview">
                                <i class="fas fa-chart-line fa-3x"></i>
                            </div>
                            <div class="chart-option-details">
                                <h4>Grade Prediction</h4>
                                <p>AI-powered prediction of your final grades based on current performance</p>
                            </div>
                        </div>
                        
                        <!-- Improvement Opportunities -->
                        <div class="chart-option" data-chart-id="improvement-opportunities">
                            <div class="chart-option-preview">
                                <i class="fas fa-lightbulb fa-3x"></i>
                            </div>
                            <div class="chart-option-details">
                                <h4>Improvement Opportunities</h4>
                                <p>Identification of specific areas where focused effort could improve performance</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="cancel-add-chart">Cancel</button>
                    <button class="btn-primary" id="confirm-add-chart">Add Selected</button>
                </div>
            </div>
        </div>
        
        <div class="notes-section">
            <div class="note-message">
                <i class="fas fa-info-circle"></i>
                <p>You can access and customize your Grade Analysis dashboard at any time from your Profile Settings.</p>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="button" class="back-btn">Back</button>
            <button type="submit" class="continue-btn" id="proceed-btn">Continue <i class="fas fa-arrow-right"></i></button>
        </div>
    </div>
    
    <!-- Onboarding Progress -->
    <div class="onboarding-progress">
        <div class="progress-step completed">1</div>
        <div class="progress-step completed">2</div>
        <div class="progress-step completed">3</div>
        <div class="progress-step completed">4</div>
        <div class="progress-step active">5</div>
        <div class="progress-step">6</div>
        <div class="progress-step">7</div>
    </div>
</div>
{% endblock %}

{% block helper_message %}
Your Jupiter data has been analyzed! Customize your dashboard by dragging charts to rearrange them, clicking the eye icon to show/hide, or the expand icon to resize.
{% endblock %}

{% block sidebar_title %}Data-Driven Learning{% endblock %}

{% block sidebar_content %}
<div class="integration-info">
    <h3>Why Analyze Grades?</h3>
    <p>SciWeb's Grade Analysis tools help you:</p>
    <ul class="feature-list">
        <li><i class="fas fa-bullseye"></i> Identify strengths and weaknesses</li>
        <li><i class="fas fa-chart-line"></i> Track your progress over time</li>
        <li><i class="fas fa-lightbulb"></i> Get personalized study recommendations</li>
        <li><i class="fas fa-graduation-cap"></i> Understand what impacts your performance</li>
    </ul>
</div>

<div class="analytics-tips">
    <h3>Making the Most of Your Data</h3>
    <p>Students who regularly review their performance analytics typically see a 15-20% improvement in their grades over time. The key is using insights to guide concrete actions.</p>
</div>

<div class="testimonial">
    <div class="quote-mark">"</div>
    <p>The dashboard view gives me a clear picture of where I'm doing well and where I need to focus my efforts.</p>
    <div class="testimonial-author">
        <img src="{{ url_for('static', filename='images/testimonial-avatar4.png') }}" alt="Student">
        <div>
            <h4>David Kim</h4>
            <p>High School Senior</p>
        </div>
    </div>
</div>
{% endblock %} 